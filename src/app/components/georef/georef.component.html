<div #georefContainer class="georef-container"
    [@toggleContent]="{value: isGeorefActive ? 'open' : 'closed', params: getAnimationParams()}">
    <!-- Barre de redimensionnement à gauche -->
    <div class="resize-handle" (mousedown)="startResize($event)" (touchstart)="startResize($event)"
        (dblclick)="resetWidth($event)" [class.hidden]="!isGeorefActive"></div>

    @if (isProcessing) {
    <div class="progress-content">
        <!-- Progress bar et texte -->
        <mat-progress-bar mode="query" color="primary"></mat-progress-bar>
        <p class="progress-text">Géoréférencement en cours ...</p>
    </div>
    } @else {
    @if (isLoading) {
    <div class="loading-container">
        <mat-spinner class="spinner" diameter="50"></mat-spinner>
        <p>Chargement de l'image...</p>
    </div>
    } @else if (!isImageLoaded) {
    <app-upload></app-upload>
    } @else {
    <app-toolbar></app-toolbar>
    <app-image [height]="imageHeight"></app-image>
    <!-- Poignée de redimensionnement vertical -->
    <div class="vertical-resize-handle" (mousedown)="startVerticalResize($event)" (dblclick)="resetHeight($event)"
        (touchstart)="startVerticalResize($event)" [class.hidden]="!isGeorefActive"></div>
    <app-gcp [height]="82 - imageHeight"></app-gcp>
    <div class="georef-info-container" [class.hidden]="!isGeorefActive">
        <!-- Paramètres de géoréférencement en ligne -->
        <div class="georef-parameters">
            {{ georefSettings.transformationType }}
        </div>
        <div class="georef-parameters">
            EPSG:{{ georefSettings.srid }}
        </div>
        @if (panelWidth > 51) {
        <div class="georef-parameters" [class.hidden-params]="panelWidth < 51">
            Ré-échantillonnage: {{ georefSettings.resamplingMethod }}
        </div>
        }
        @if (panelWidth > 40) {
        <div class="georef-parameters" [class.hidden-params]="panelWidth < 40">
            Compression: {{ georefSettings.compressionType }}
        </div>
        }

        <div class="georef-parameters">
            Erreur moyenne: {{ totalRMSE | number:'1.4-4' }}
        </div>

        <!-- Coordonnées du curseur -->
        <div class="cursor-coordinates">
            X: {{ cursorX | number:'1.4-4' }} px | Y: {{ cursorY | number:'1.4-4' }} px
        </div>
    </div>
    }
    }
</div>